<VirtualHost *:80>
    ServerAdmin admin@localhost
    DocumentRoot /var/www/app/public

    <Directory /var/www/app/public>
        Options FollowSymLinks
        AllowOverride All
        Require all granted
        AddDefaultCharset utf-8
        DirectoryIndex index.php index.html

        <IfModule mod_rewrite.c>
            RewriteEngine On

            # Merge slashes "//" to "/"
            RewriteCond %{THE_REQUEST} .*\ (.*)//(.*)\ HTTP/
            RewriteRule .* %1/%2 [R=301,L]

            # Redirect /index.php to /
            RewriteCond %{THE_REQUEST} ^.*\ /index\.(?:php|htm|html)(\?.*)?\ HTTP/
            RewriteRule ^.*$ /%1 [R=301,L]

            # Send all requests to index.php
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteRule . /index.php [L]
        </IfModule>
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
